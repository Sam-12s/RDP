name: Start RDP

# ‚Üê This is required: tells GitHub when to run the workflow
on: 
  workflow_dispatch:  # lets you trigger it manually

jobs:
  start-rdp:
    runs-on: ubuntu-latest
    steps:
      - name: Install dependencies
        run: sudo apt-get update && sudo apt-get install -y xrdp xfce4 xfce4-terminal unzip

      - name: Install ngrok
        run: |
          curl -sLo ngrok.zip https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.zip
          unzip ngrok.zip
          chmod +x ngrok
          sudo mv ngrok /usr/local/bin/

      - name: Start xrdp
        run: sudo service xrdp start

      - name: Start ngrok
        run: ngrok tcp 3389 --authtoken ${{ secrets.NGROK_AUTH_TOKEN }}
